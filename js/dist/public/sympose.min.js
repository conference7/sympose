"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".sympose-schedule.event"),s=wpApiSettings.root+"sympose/v1/update_agenda_sessions";e.forEach((function(e){var t=localStorage.getItem("_sympose_saved_sessions");void 0!==(t=null===t?{}:JSON.parse(t))[e.dataset.id]&&Object.keys(t[e.dataset.id]).map((function(s){var a=t[e.dataset.id][s],o=e.querySelector('.session-row[data-id="'+a+'"]');o.querySelector(".session-saved").dataset.state="on",o.classList.add("is-favorite"),e.dataset.starsHidden=!1})),e.addEventListener("click",(function(t){t.stopPropagation(),t.target.closest(".saved-sessions-control")&&e.querySelectorAll(".session-row.is-favorite").length>0&&(e.dataset.showFavorites="true"===e.dataset.showFavorites?"false":"true");var a=t.target.closest(".session-saved");if(null!==a){var o=a.closest("table").dataset.id,n="off"===a.dataset.state?"on":"off",i=a.parentNode.dataset.id;a.dataset.state=n,"on"===n?a.parentNode.classList.add("is-favorite"):a.parentNode.classList.remove("is-favorite");var d={"X-WP-Nonce":wpApiSettings.nonce},r=localStorage.getItem("_sympose_saved_sessions");r=null===r?[]:JSON.parse(r),fetch(s,{method:"POST",headers:d,body:JSON.stringify({state:n,id:i,event_id:o,saved_sessions:r})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("_sympose_saved_sessions",JSON.stringify(e.data)),e.status}))}}))}))}));